window.Glyphbase = window.Glyphbase || {};
window.Glyphbase.Maps = (function() {

  var map;

  function initialize(domElem, mapZoom, mapCenter) {

    var zoom            = mapZoom || 16;
    var center          = mapCenter || new google.maps.LatLng(37.794108,-122.39511);
    var mapContainer    = domElem || 'map-canvas';
    var mapCanvas       = document.getElementById(mapContainer);
   
    var mapOptions = {
        disableDefaultUI: true,
        scrollwheel: false,
        draggable: false,
        center: center,
        zoom: zoom,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        styles: [
          {
            "elementType": "labels",
            "stylers": [
              { "visibility": "off" }
            ]
          },{
            "featureType": "administrative",
            "elementType": "labels",
            "stylers": [
              { "visibility": "on" }
            ]
          },{
            "featureType": "road",
            "elementType": "labels",
            "stylers": [
              { "visibility": "on" }
            ]
          },{
            "featureType": "transit",
            "elementType": "labels",
            "stylers": [
              { "visibility": "on" }
            ]
          },{
            "featureType": "poi.park",
            "stylers": [
              { "hue": "#22ff00" },
              { "saturation": -48 },
              { "lightness": -10 }
            ]
          }
        ]
    };

    map = new google.maps.Map(mapCanvas, mapOptions);

  }

  function addMarker(latitude, longitude, title) {
    var markerTitle = title || "Glyph";
    var marker = new google.maps.Marker({
        map:       map,
        animation: google.maps.Animation.DROP,
        title:     markerTitle,
        position:  new google.maps.LatLng(latitude, longitude),
        icon: "<%= asset_path 'mapLocation.svg' %>",
        optimized: false 
    });
    return marker;
  };

  function centerOnMarker(marker) {
    map.setCenter(marker.getPosition());
  };

  return {
    initialize:     initialize,
    addMarker:      addMarker,
    centerOnMarker: centerOnMarker
  };
})();